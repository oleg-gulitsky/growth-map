# Growth Map üìö

–î–µ–º–æ-–ø—Ä–æ–µ–∫—Ç —Å –æ–¥–Ω–∏–º —ç–∫—Ä–∞–Ω–æ–º –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è.

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

### –í–∏–¥–µ–æ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

https://github.com/user-attachments/assets/8a925843-4998-4c35-b542-a3ce664c73e1

### –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–Ω–ª–∞–π–Ω

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø–æ–º–æ—â—å—é Expo Snack:
#### –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ –¥–ª—è Snack

- –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª `App.js`
- –£–¥–∞–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –≤–µ–±-–≤–µ—Ä—Å–∏–∏:
  - `react-native-reanimated` (–∞–Ω–∏–º–∞—Ü–∏–∏)
  - `react-native-gesture-handler`
  - `expo-router` (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞)
- –£–ø—Ä–æ—â–µ–Ω—ã package.json –∏ app.json –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ Snack
- –î–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–æ–≤ –≤—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä—è–º–æ –≤ –∫–æ–¥

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ, –∞–∫—Ç–∏–≤–Ω–æ, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—Ä–æ–∫
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

#### –ß—Ç–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ

- –ê–Ω–∏–º–∞—Ü–∏–∏ (—Ç—Ä–µ–±—É—é—Ç react-native-reanimated)
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ expo-router (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤—Å–µ –≤ –æ–¥–Ω–æ–º App.js –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã)

#### –°—Å—ã–ª–∫–∞

üîó [–û—Ç–∫—Ä—ã—Ç—å –≤ Expo Snack](https://snack.expo.dev/@oleg_g/github.com-oleg-gulitsky-growth-map:snack-export)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Supabase)

### –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω—É–∂–Ω—ã?

#### 1. `lessons` ‚Äî –º–æ–¥—É–ª–∏ –æ–±—É—á–µ–Ω–∏—è
```sql
- id (uuid, primary key)
- title (text)
- order_index (integer)
```

#### 2. `user_completed_lessons` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```sql
- user_id (uuid, foreign key -> auth.users)
- lesson_id (uuid, foreign key -> lessons)
- PRIMARY KEY (user_id, lesson_id)
```

#### 3. `lesson_requirements` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
```sql
- lesson_id (uuid, foreign key -> lessons)
- required_lesson_id (uuid, foreign key -> lessons)
```

### –ö–∞–∫ —Å–≤—è–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å—Ç–∞—Ç—É—Å —É—Ä–æ–∫–∞?

–°—Ç–∞—Ç—É—Å –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `user_completed_lessons`:

- **done** ‚Äî –µ—Å—Ç—å –∑–∞–ø–∏—Å—å `(user_id, lesson_id)` –≤ —Ç–∞–±–ª–∏—Ü–µ
- **active** ‚Äî –Ω–µ—Ç –∑–∞–ø–∏—Å–∏, –Ω–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `lesson_requirements` –ø—Ä–æ–π–¥–µ–Ω—ã
- **locked** ‚Äî –Ω–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

–°—Ç–∞—Ç—É—Å –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î, –∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

### –ö–∞–∫ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–ø–∏—Å–æ–∫?

–û–¥–∏–Ω SQL-–∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:

```sql
SELECT 
  l.id,
  l.title,
  l.order_index,
  CASE 
    WHEN ucl.lesson_id IS NOT NULL THEN 'done'
    WHEN NOT EXISTS (
      SELECT 1 FROM lesson_requirements lr
      WHERE lr.lesson_id = l.id
      AND lr.required_lesson_id NOT IN (
        SELECT lesson_id FROM user_completed_lessons 
        WHERE user_id = auth.uid()
      )
    ) THEN 'active'
    ELSE 'locked'
  END as status
FROM lessons l
LEFT JOIN user_completed_lessons ucl 
  ON l.id = ucl.lesson_id AND ucl.user_id = auth.uid()
ORDER BY l.order_index;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
```json
[
  { "id": 1, "title": "Intro", "status": "done" },
  { "id": 2, "title": "Basics", "status": "done" },
  { "id": 3, "title": "Advanced", "status": "active" },
  { "id": 4, "title": "Expert", "status": "locked" }
]
```